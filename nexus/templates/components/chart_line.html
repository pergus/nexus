{# Reusable line chart component #}
{# Usage: {% include 'components/chart_line.html' with chart_id="my-chart" series_data=series_data chart_title="My Chart" height=380 %} #}

<div class="card">
  <div class="card-header">
    <h4 class="card-title mb-0">{{ chart_title|default:"Line Chart" }}</h4>
  </div>
  <div class="card-body">
    <div dir="ltr">
      <div id="{{ chart_id|default:'apex-line-chart' }}" class="apex-charts" style="min-height: {{ height|default:380 }}px;"></div>
    </div>
  </div>
</div>

{# Script to initialize the chart - should be placed in the template where this component is used #}
{# Example initialization script:
<script>
  var options = {
    chart: {
      height: {{ height|default:380 }},
      type: 'line',
      zoom: { enabled: false },
      toolbar: { show: false }
    },
    colors: ['#6658dd'],
    dataLabels: { enabled: true },
    stroke: {
      width: 3,
      curve: 'smooth'
    },
    series: {{ series_data|safe }},
    title: {
      text: '{{ chart_title|default:"Line Chart" }}',
      align: 'left',
      style: {
        fontSize: '14px',
        color: '#666'
      }
    },
    grid: {
      row: {
        colors: ['transparent', 'transparent'],
        opacity: 0.2
      },
      borderColor: '#f1f3fa'
    },
    markers: {
      style: 'inverted',
      size: 6
    },
    xaxis: {
      categories: {{ xaxis_categories|default:"[]"|safe }},
      title: {
        text: '{{ xaxis_title|default:"" }}'
      }
    },
    yaxis: {
      title: {
        text: '{{ yaxis_title|default:"" }}'
      },
      min: {{ yaxis_min|default:undefined }},
      max: {{ yaxis_max|default:undefined }}
    },
    legend: {
      position: 'top',
      horizontalAlign: 'right',
      floating: true,
      offsetY: -25,
      offsetX: -5
    },
    responsive: [{
      breakpoint: 600,
      options: {
        chart: {
          toolbar: { show: false }
        },
        legend: { show: false }
      }
    }]
  };

  var chart = new ApexCharts(document.querySelector("#{{ chart_id|default:'apex-line-chart' }}"), options);
  chart.render();
</script>
#}